#!/usr/local/bin/smalltalk/gemstone/topaz

	input $ROWAN_PROJECTS_HOME/Rowan/platforms/gemstone/topaz/3.5.0/install_1.tpz
	input $ROWAN_PROJECTS_HOME/Rowan/platforms/gemstone/topaz/3.5.0/install_2.tpz
	input $ROWAN_PROJECTS_HOME/Rowan/platforms/gemstone/topaz/3.5.0/install_3.tpz
	input $ROWAN_PROJECTS_HOME/Rowan/platforms/gemstone/topaz/3.5.0/install_4.tpz

	iferr_clear

	set u SystemUser p swordfish
	login

	run
	| url projectSetDefinition |
	url := 'file:$ROWAN_PROJECTS_HOME/st_launcher/rowan/specs/st_launcher_scripts.ston'.
	projectSetDefinition := (RwComponentProjectDefinition newForUrl: url)
		projectHome: '$ROWAN_PROJECTS_HOME';
		read.
	projectSetDefinition load
%

	run
	| snapshot |
	snapshot := StLauncher_GemStone_Snapshot_Script new
	snapshot
		resumeCheckpoints;
		takeSnapshots: 'st_launcher.dbf' 
		to: '$ROWAN_PROJECTS_HOME/st_launcher/bootstrapping/gemstone/resources'
		suspendInMinutes: 15 
		safely: false.		
%

	commit
	errorCount
	exit

